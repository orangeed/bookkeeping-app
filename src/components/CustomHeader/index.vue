<!-- è‡ªå®šä¹‰header -->
<template>
  <div class="header">
    <span class="title"> è®°è´¦ </span>
    <img src="../../static/img/footer/face.png" class="face" />
    <uni-section class="header-ledger" type="line">
      <uni-data-select
        v-model="currendLedger"
        :localdata="ledgerList"
        @change="handleChangeLedger"
        :clear="false"
      ></uni-data-select>
    </uni-section>
  </div>
  <Dialog
    :show-dialog="showNewLedger"
    @close="handleClose"
    @enter="handleEnter"
  >
    <input type="text" autofocus />
  </Dialog>
</template>

<script lang="ts">
export default {
  options: {
    styleIsolation: "shared",
  },
};
</script>

<script lang="ts" name="CustomHeader" setup>
import type { Ref } from "vue";
import { ref } from "vue";
import Dialog from "../Dialog/index.vue";

// headeré«˜åº¦
const headerHeight = `${uni.getSystemInfoSync().statusBarHeight}px`;
console.log("headerHeight", headerHeight);

// è´¦æœ¬æ•°ç»„
const ledgerList = [
  {
    value: 1,
    text: "ğŸ“™æˆ‘çš„è´¦æœ¬",
  },
  {
    text: "â•æ–°å»ºè´¦æœ¬",
  },
];

// å½“å‰çš„è´¦æœ¬
const currendLedger: Ref<number> = ref(1);
// æ˜¾ç¤ºè´¦å•
const showNewLedger: Ref<boolean> = ref(false);
// åˆ‡æ¢è´¦æœ¬çš„äº‹ä»¶
const handleChangeLedger = (id: any) => {
  console.log("val", id);
  if (id) {
    // TODOè·å–è´¦æœ¬çš„idï¼Œå…¨å±€ä¿å­˜ï¼Œæ‰€æœ‰çš„è´¦å•æŸ¥è¯¢å¸¦æœ‰id
  } else {
    showNewLedger.value = true;
  }
};
// å…³é—­å¼¹çª—
const handleClose = (val: boolean) => {
  showNewLedger.value = val;
};
// ç¡®å®š
const handleEnter = (val: boolean) => {
  showNewLedger.value = val;
  // TODOæ²¡æœ‰idçš„è¯ï¼Œå°±æ–°å»ºè´¦å•ï¼Œå‘èµ·è¯·æ±‚ï¼Œç¦»çº¿æ¨¡å¼çš„è¯ï¼Œæœ¬åœ°åˆ›å»ºè´¦å•
};
</script>
<style lang="scss" scoped>
.header {
  height: calc(v-bind(headerHeight) + var(--header-height));
  background: linear-gradient(var(--theme-light-color), #fff);
  position: relative;
  margin-bottom: var(--header-bootom);
  .title {
    position: absolute;
    bottom: 0;
    left: var(--header-left);
    height: 44px;
    display: flex;
    align-items: center;
    color: var(--theme-color);
    font-weight: 600;
    font-size: calc(36px * var(--size));
  }
  .face {
    width: 20px;
    height: 8px;
    position: absolute;
    bottom: 0;
    left: calc(var(--header-left) + 8px);
    display: flex;
  }
  &-ledger {
    position: absolute;
    bottom: 0;
    left: calc(var(--header-left) + 50px);
    width: 150px;
    border: none;
  }
}
input {
  border-bottom: 1px solid var(--theme-color);
}
</style>
<style>
.uni-select {
  border: none;
}
</style>
